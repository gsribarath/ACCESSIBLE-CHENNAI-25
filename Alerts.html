<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Accessible Chennai - Live Alerts Dashboard</title>
  <meta name="description" content="Real-time accessibility alerts for Chennai's public transport system with inclusive features.">
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600&display=swap" rel="stylesheet">
  <style>
    :root {
      --primary: #0b596c;
      --primary-dark: #106e8d;
      --accent: #f59e0b;
      --success: #10b981;
      --danger: #ef4444;
      --blue-gradient: linear-gradient(135deg, #0a4861 0%, #145974 100%);
      --glow-blue: 0 0 20px rgba(59, 130, 246, 0.5);
      --glow-accent: 0 0 15px rgba(245, 158, 11, 0.6);
    }

    * {
      scroll-behavior: smooth;
    }

    body {
      background: linear-gradient(135deg, #08354a 0%, #05374e 25%, #0e4e6c 50%, #0d5565 75%, #0e5f71 100%);
      background-size: 400% 400%;
      animation: gradientFlow 15s ease infinite;
      min-height: 100vh;
      font-family: 'Poppins', sans-serif;
      color: #f8fafc;
      display: flex;
      flex-direction: column;
    }

    @keyframes gradientFlow {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }

    .glass {
      background: rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(15px);
      border: 1px solid rgba(255, 255, 255, 0.2);
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
    }

    .glass-strong {
      background: rgba(255, 255, 255, 0.15);
      backdrop-filter: blur(20px);
      border: 1px solid rgba(255, 255, 255, 0.3);
      box-shadow: 0 12px 40px rgba(0, 0, 0, 0.15);
    }

    .glow-primary {
      box-shadow: var(--glow-blue);
      transition: all 0.3s ease;
    }

    .glow-primary:hover {
      box-shadow: 0 0 30px rgba(59, 130, 246, 0.8);
      transform: translateY(-2px);
    }

    .hover-light {
      position: relative;
      overflow: hidden;
    }

    .hover-light::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
      transition: left 0.5s ease;
    }

    .hover-light:hover::before {
      left: 100%;
    }

    .parallax-section {
      transform: translateY(50px);
      opacity: 0;
      transition: all 0.8s ease;
    }

    .parallax-section.visible {
      transform: translateY(0);
      opacity: 1;
    }

    .status-indicator {
      width: 10px;
      height: 10px;
      border-radius: 50%;
      position: relative;
      margin-right: 0.5rem;
    }

    .status-indicator::before {
      content: '';
      position: absolute;
      top: -2px;
      left: -2px;
      right: -2px;
      bottom: -2px;
      border-radius: 50%;
      animation: pulse 2s infinite;
    }

    .status-available::before { background: rgba(16, 185, 129, 0.3); }
    .status-delayed::before { background: rgba(245, 158, 11, 0.3); }
    .status-unavailable::before { background: rgba(239, 68, 68, 0.3); }

    @keyframes pulse {
      0% { transform: scale(1); opacity: 0.8; }
      50% { transform: scale(1.5); opacity: 0.4; }
      100% { transform: scale(1); opacity: 0.8; }
    }

    .alert-card {
      transition: all 0.3s ease;
      transform-style: preserve-3d;
      min-height: 300px;
      display: flex;
      flex-direction: column;
    }

    .alert-card:hover {
      transform: scale(1.05) translateY(-5px);
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
    }

    .alert-card:active {
      transform: scale(0.98);
    }

    .filter-tag {
      transition: all 0.3s ease;
      min-width: 150px;
      padding: 0.75rem 1.25rem;
      text-align: center;
      line-height: 1.5;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      white-space: normal;
      max-width: 100%;
    }

    .filter-tag.active {
      background: var(--blue-gradient);
      color: #fff;
      border-color: var(--accent);
    }

    .filter-tag:hover {
      transform: scale(1.05);
      box-shadow: 0 0 10px rgba(255, 255, 255, 0.2);
    }

    .live-indicator {
      animation: livePulse 1.5s infinite;
    }

    @keyframes livePulse {
      0%, 100% { opacity: 1; transform: scale(1); }
      50% { opacity: 0.7; transform: scale(1.1); }
    }

    .progress-ring {
      transform: rotate(-90deg);
    }

    .progress-ring-circle {
      stroke-dasharray: 251.2;
      stroke-dashoffset: 0;
      transition: stroke-dashoffset 0.5s ease-in-out;
    }

    .notification-badge {
      animation: bounce 2s infinite;
    }

    @keyframes bounce {
      0%, 20%, 53%, 80%, 100% { transform: translate3d(0,0,0); }
      40%, 43% { transform: translate3d(0,-8px,0); }
      70% { transform: translate3d(0,-4px,0); }
      90% { transform: translate3d(0,-2px,0); }
    }

    .notification {
      animation: slideInRight 0.5s ease-out, fadeOut 0.5s ease-in 4.5s forwards;
    }

    @keyframes slideInRight {
      from { transform: translateX(100%); opacity: 0; }
      to { transform: translateX(0); opacity: 1; }
    }

    @keyframes fadeOut {
      to { opacity: 0; transform: translateX(100%); }
    }

    .modal-backdrop {
      animation: fadeIn 0.3s ease-out;
    }

    .modal-content {
      animation: modalSlideIn 0.3s ease-out;
    }

    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    @keyframes modalSlideIn {
      from { opacity: 0; transform: translateY(-50px) scale(0.9); }
      to { opacity: 1; transform: translateY(0) scale(1); }
    }

    .mobile-menu {
      max-height: 0;
      overflow: hidden;
      transition: max-height 0.3s ease-out;
    }

    .mobile-menu.open {
      max-height: 500px;
    }

    .notification-badge-container {
      position: relative;
    }

    .notification-badge-outer {
      position: absolute;
      top: -4px;
      right: -4px;
      background: var(--danger);
      border-radius: 9999px;
      width: 20px;
      height: 20px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 0.75rem;
      font-weight: bold;
      animation: bounce 2s infinite;
      z-index: 10;
    }

    .alerts-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
      gap: 1.5rem;
      align-items: stretch;
    }

    @media (max-width: 768px) {
      .alerts-grid {
        grid-template-columns: 1fr;
        gap: 1rem;
      }
    }

    .filter-container {
      display: flex;
      flex-wrap: wrap;
      gap: 0.75rem;
      align-items: center;
      justify-content: space-between;
      padding: 0.5rem;
    }

    .filter-row {
      display: flex;
      flex-wrap: wrap;
      gap: 0.75rem;
      width: 100%;
      justify-content: space-between;
      align-items: center;
    }

    main {
      flex-grow: 1;
      padding-bottom: 2rem;
    }

    footer {
      margin-top: auto;
    }

    .focusable:focus {
      outline: 3px solid var(--accent);
      outline-offset: 2px;
    }

    @media (prefers-contrast: high) {
      .glass, .glass-strong {
        background: rgba(255, 255, 255, 0.9);
        color: #000;
      }
    }

    @media (prefers-reduced-motion: reduce) {
      *, *::before, *::after {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
      }
      html {
        scroll-behavior: auto !important;
      }
    }
  </style>
</head>
<body>
  <a href="#main-content" class="sr-only focus:not-sr-only focus:absolute focus:top-4 focus:left-4 focus:px-4 focus:py-2 focus:bg-amber-400 focus:text-white focus:rounded-md focus:z-50">
    Skip to main content
  </a>

  <!-- Updated Header to match Home.html theme (based on community.html alignment) -->
  <header class="fixed top-0 w-full z-50 glass backdrop-blur-xl">
    <div class="max-w-7xl mx-auto px-4 py-4">
      <div class="flex items-center justify-between">
        <div class="flex items-center">
          <a href="index.html" class="flex items-center space-x-1 focusable rounded-md">
            <div class="w-20 h-20 rounded-full flex items-center justify-center">
              <img src="ACCESSIBLECHENNAII.png" alt="Accessible Chennai Logo" class="w-16 h-16 object-cover rounded-full">
            </div>
            <h1 class="text-2xl font-bold">Accessible<span class="bg-gradient-to-r from-blue-300 to-cyan-300 bg-clip-text text-transparent"> Chennai</span></h1>
          </a>
        </div>
        <nav class="hidden md:flex items-center space-x-6">
          <a href="home.html" class="text-blue-200 hover:text-white mx-3 focusable transition-all duration-300" onpointerenter="announceToUser('Home')">Home</a>
          <a href="navigate.html" class="text-blue-200 hover:text-white mx-3 focusable transition-all duration-300" onpointerenter="announceToUser('Navigate')">Navigate</a>
          <a href="community.html" class="text-blue-200 hover:text-white mx-3 focusable transition-all duration-300" onpointerenter="announceToUser('Community')">Community</a>
          <a href="alerts.html" class="text-blue-200 hover:text-white mx-3 focusable transition-all duration-300" onpointerenter="announceToUser('Alerts')">Alerts</a>
          <a href="settings.html" class="text-blue-200 hover:text-white mx-3 focusable transition-all duration-300" onpointerenter="announceToUser('Settings')">Settings</a>
        </nav>
        <div class="flex items-center space-x-4">
          <div class="hidden sm:block text-sm text-blue-200">
            Last update: <span id="lastUpdate" class="text-blue-400 font-medium">Just now</span>
          </div>
          <button id="refreshBtn" class="glass p-2 rounded-full focusable hover:bg-white/10 hover-light glow-primary" title="Refresh data" onpointerenter="announceToUser('Refresh data')">
            <i class="fas fa-sync-alt text-blue-400"></i>
          </button>
          <div class="notification-badge-container">
            <button id="notificationBtn" class="glass p-2 rounded-full focusable hover:bg-white/10 hover-light glow-primary" title="View notifications" onpointerenter="announceToUser('View notifications')">
              <i class="fas fa-bell text-amber-400"></i>
            </button>
            <div id="notificationCount" class="notification-badge-outer">3</div>
          </div>
          <button id="mobileMenuButton" class="md:hidden glass p-2 rounded-full focusable hover:bg-white/10 hover-light glow-primary" title="Menu" onpointerenter="announceToUser('Menu')">
            <i class="fas fa-bars text-white"></i>
          </button>
        </div>
      </div>
      <div id="mobileMenu" class="mobile-menu md:hidden mt-4">
        <div class="flex flex-col space-y-2 py-2">
          <a href="Home.html" class="text-blue-200 hover:text-white px-3 py-2 rounded-lg hover:bg-white/10 focusable transition-all duration-300 hover-light" onpointerenter="announceToUser('Home')">Home</a>
          <a href="navigate.html" class="text-blue-200 hover:text-white px-3 py-2 rounded-lg hover:bg-white/10 focusable transition-all duration-300 hover-light" onpointerenter="announceToUser('Navigate')">Navigate</a>
          <a href="community.html" class="text-blue-200 hover:text-white px-3 py-2 rounded-lg hover:bg-white/10 focusable transition-all duration-300 hover-light" onpointerenter="announceToUser('Community')">Community</a>
          <a href="alerts.html" class="text-blue-200 hover:text-white px-3 py-2 rounded-lg hover:bg-white/10 focusable transition-all duration-300 hover-light" onpointerenter="announceToUser('Alerts')">Alerts</a>
          <a href="settings.html" class="text-blue-200 hover:text-white px-3 py-2 rounded-lg hover:bg-white/10 focusable transition-all duration-300 hover-light" onpointerenter="announceToUser('Settings')">Settings</a>
        </div>
      </div>
    </div>
  </header>

  <main id="main-content" class="pt-24 pb-12 max-w-7xl mx-auto px-4 flex-grow">
    <section id="filtersSection" class="parallax-section glass-strong p-8 rounded-3xl mb-8" role="region" aria-label="Smart filters">
      <div class="flex flex-col sm:flex-row sm:items-center justify-between mb-6 gap-4">
        <h2 class="text-2xl font-bold text-white flex items-center space-x-2">
          <i class="fas fa-filter text-blue-400" aria-hidden="true"></i>
          <span class="bg-gradient-to-r from-blue-300 to-cyan-300 bg-clip-text text-transparent">Smart Filters</span>
        </h2>
        <span id="filterStatus" class="sr-only" aria-live="polite"></span>
      </div>

      <div class="filter-container mb-4" role="radiogroup" aria-label="Alert filters">
        <div class="filter-row">
          <button data-filter="all" class="filter-tag active glass px-3 py-1 rounded-2xl text-sm font-medium border border-blue-400 text-blue-400 focusable hover-light glow-primary" title="Show all alerts" aria-label="Show all alerts" aria-pressed="true" aria-describedby="count-all" onpointerenter="announceToUser('Show all alerts')">
            <i class="fas fa-globe mr-1" aria-hidden="true"></i>All <span class="ml-1 bg-blue-400 text-white px-2 py-0.5 rounded-full text-xs" id="count-all">0</span>
          </button>
          <button data-filter="metro" class="filter-tag glass px-3 py-1 rounded-2xl text-sm font-medium border border-gray-600 text-blue-200 hover:border-blue-400 hover:text-blue-400 focusable hover-light glow-primary" title="Show metro alerts" aria-label="Show metro alerts" aria-pressed="false" aria-describedby="count-metro" onpointerenter="announceToUser('Show metro alerts')">
            <i class="fas fa-subway mr-1" aria-hidden="true"></i>Metro <span class="ml-1 bg-gray-600 text-white px-2 py-0.5 rounded-full text-xs" id="count-metro">0</span>
          </button>
          <button data-filter="bus" class="filter-tag glass px-3 py-1 rounded-2xl text-sm font-medium border border-gray-600 text-blue-200 hover:border-blue-400 hover:text-blue-400 focusable hover-light glow-primary" title="Show bus alerts" aria-label="Show bus alerts" aria-pressed="false" aria-describedby="count-bus" onpointerenter="announceToUser('Show bus alerts')">
            <i class="fas fa-bus mr-1" aria-hidden="true"></i>Bus <span class="ml-1 bg-gray-600 text-white px-2 py-0.5 rounded-full text-xs" id="count-bus">0</span>
          </button>
          <button data-filter="wheelchair" class="filter-tag glass px-3 py-1 rounded-2xl text-sm font-medium border border-gray-600 text-blue-200 hover:border-blue-400 hover:text-blue-400 focusable hover-light glow-primary" title="Show wheelchair accessible alerts" aria-label="Show wheelchair accessible alerts" aria-pressed="false" aria-describedby="count-wheelchair" onpointerenter="announceToUser('Show wheelchair accessible alerts')">
            <i class="fas fa-wheelchair mr-1" aria-hidden="true"></i>Access <span class="ml-1 bg-gray-600 text-white px-2 py-0.5 rounded-full text-xs" id="count-wheelchair">0</span>
          </button>
          <button data-filter="delay" class="filter-tag glass px-3 py-1 rounded-2xl text-sm font-medium border border-gray-600 text-blue-200 hover:border-blue-400 hover:text-blue-400 focusable hover-light glow-primary" title="Show delay alerts" aria-label="Show delay alerts" aria-pressed="false" aria-describedby="count-delay" onpointerenter="announceToUser('Show delay alerts')">
            <i class="fas fa-exclamation-triangle mr-1" aria-hidden="true"></i>Delay <span class="ml-1 bg-gray-600 text-white px-2 py-0.5 rounded-full text-xs" id="count-delay">0</span>
          </button>
        </div>
      </div>

      <div id="advancedFilters" class="hidden border-t border-white/20 pt-4" role="group" aria-label="Advanced filters">
        <div class="grid grid-cols-2 md:grid-cols-4 gap-3">
          <button data-filter="audio" class="filter-tag glass px-3 py-1 rounded-2xl text-sm hover:bg-white/10 focusable hover-light glow-primary" title="Audio support filter" aria-label="Filter by audio support" aria-pressed="false" onpointerenter="announceToUser('Filter by audio support')">
            <i class="fas fa-volume-up mr-1" aria-hidden="true"></i>Audio
          </button>
          <button data-filter="visual" class="filter-tag glass px-3 py-1 rounded-2xl text-sm hover:bg-white/10 focusable hover-light glow-primary" title="Visual aid filter" aria-label="Filter by visual aid" aria-pressed="false" onpointerenter="announceToUser('Filter by visual aid')">
            <i class="fas fa-eye mr-1" aria-hidden="true"></i>Visual
          </button>
          <button data-filter="tactile" class="filter-tag glass px-3 py-1 rounded-2xl text-sm hover:bg-white/10 focusable hover-light glow-primary" title="Tactile guide filter" aria-label="Filter by tactile guide" aria-pressed="false" onpointerenter="announceToUser('Filter by tactile guide')">
            <i class="fas fa-hand-paper mr-1" aria-hidden="true"></i>Tactile
          </button>
          <button data-filter="emergency" class="filter-tag glass px-3 py-1 rounded-2xl text-sm hover:bg-white/10 focusable hover-light glow-primary" title="Emergency filter" aria-label="Filter by emergency" aria-pressed="false" onpointerenter="announceToUser('Filter by emergency')">
            <i class="fas fa-exclamation-circle mr-1" aria-hidden="true"></i>Emergency
          </button>
        </div>
      </div>

      <button id="showAdvanced" class="mt-4 text-blue-400 text-sm flex items-center space-x-1 hover:text-blue-300 focusable hover-light glow-primary" title="Toggle advanced filters" aria-label="Toggle advanced filters" onpointerenter="announceToUser('Toggle advanced filters')">
        <i class="fas fa-chevron-down" aria-hidden="true"></i>
        <span>Advanced Filters</span>
      </button>
    </section>

    <section class="parallax-section space-y-6">
      <div class="flex flex-col sm:flex-row sm:items-center justify-between gap-4">
        <h2 id="alertsTitle" class="text-3xl font-bold text-white flex items-center space-x-2">
          <i class="fas fa-broadcast-tower text-blue-400" aria-hidden="true"></i>
          <span class="bg-gradient-to-r from-blue-300 to-cyan-300 bg-clip-text text-transparent">Live Feed</span>
        </h2>
        <div class="flex items-center space-x-3">
          <select id="sortBy" class="glass bg-transparent text-white px-4 py-2 rounded-2xl border border-white/20 focusable" title="Sort alerts" aria-label="Sort alerts" onpointerenter="announceToUser('Sort alerts')">
            <option value="time">Latest First</option>
            <option value="priority">High Priority</option>
            <option value="distance">Nearest</option>
            <option value="relevance">Most Relevant</option>
          </select>
        </div>
      </div>

      <div id="alertsContainer" class="alerts-grid" role="main" aria-label="Transportation alerts" aria-live="polite"></div>

      <div id="noAlertsMessage" class="hidden text-center py-12">
        <div class="glass-strong p-8 rounded-3xl max-w-md mx-auto">
          <i class="fas fa-search text-blue-200 text-4xl mb-4" aria-hidden="true"></i>
          <h3 class="text-xl font-bold text-blue-200 mb-2">No Alerts Found</h3>
          <p class="text-blue-200">Try adjusting your filters or check back later for updates.</p>
        </div>
      </div>
    </section>
  </main>

  <div id="modal" class="fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 hidden modal-backdrop">
    <div class="glass-strong p-8 rounded-3xl max-w-md w-full mx-4 modal-content">
      <div class="flex justify-between items-center mb-6">
        <h3 class="text-2xl font-bold text-white" id="modalTitle">Modal Title</h3>
        <button id="closeModal" class="text-blue-200 hover:text-white focusable hover-light glow-primary" aria-label="Close modal" onpointerenter="announceToUser('Close modal')">
          <i class="fas fa-times"></i>
        </button>
      </div>
      <div class="text-blue-200 mb-6" id="modalContent">Modal content</div>
      <div class="flex justify-end space-x-3">
        <button id="modalCancel" class="glass px-4 py-2 rounded-2xl hover:bg-white/10 focusable hover-light glow-primary" aria-label="Cancel" onpointerenter="announceToUser('Cancel')">Cancel</button>
        <button id="modalConfirm" class="bg-gradient-to-r from-blue-500 to-blue-600 text-white px-4 py-2 rounded-2xl focusable hover-light glow-primary" aria-label="Confirm" onpointerenter="announceToUser('Confirm')">Confirm</button>
      </div>
    </div>
  </div>

  <div id="notificationContainer" class="fixed top-20 right-4 z-50 space-y-2" aria-live="polite"></div>

  <footer class="glass-strong text-white py-12">
    <div class="max-w-7xl mx-auto px-4">
      <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
        <div>
          <h3 class="text-lg font-semibold mb-4">Accessible Chennai</h3>
          <p class="text-blue-200">
            Empowering inclusive mobility through technology and community collaboration.
          </p>
          <div class="flex space-x-4 mt-4">
            <a href="#" class="text-blue-200 hover:text-white focusable transition-all duration-300" aria-label="Facebook" onpointerenter="announceToUser('Facebook')">
              <i class="fab fa-facebook-f"></i>
            </a>
            <a href="#" class="text-blue-200 hover:text-white focusable transition-all duration-300" aria-label="Twitter" onpointerenter="announceToUser('Twitter')">
              <i class="fab fa-twitter"></i>
            </a>
            <a href="#" class="text-blue-200 hover:text-white focusable transition-all duration-300" aria-label="Instagram" onpointerenter="announceToUser('Instagram')">
              <i class="fab fa-instagram"></i>
            </a>
          </div>
        </div>
        <div>
          <h4 class="text-lg font-semibold mb-4">Quick Links</h4>
          <ul class="space-y-2">
            <li><a href="#" class="text-blue-200 hover:text-white focusable transition-all duration-300" onpointerenter="announceToUser('Developer Guide')">Developer Guide</a></li>
            <li><a href="#" class="text-blue-200 hover:text-white focusable transition-all duration-300" onpointerenter="announceToUser('Privacy Policy')">Privacy Policy</a></li>
            <li><a href="#" class="text-blue-200 hover:text-white focusable transition-all duration-300" onpointerenter="announceToUser('Terms of Service')">Terms of Service</a></li>
          </ul>
        </div>
        <div>
          <h4 class="text-lg font-semibold mb-4">Resources</h4>
          <ul class="space-y-2">
            <li><a href="#" class="text-blue-200 hover:text-white focusable transition-all duration-300" onpointerenter="announceToUser('API Documentation')">API Documentation</a></li>
            <li><a href="#" class="text-blue-200 hover:text-white focusable transition-all duration-300" onpointerenter="announceToUser('Accessibility Guidelines')">Accessibility Guidelines</a></li>
            <li><a href="#" class="text-blue-200 hover:text-white focusable transition-all duration-300" onpointerenter="announceToUser('Transit Maps')">Transit Maps</a></li>
          </ul>
        </div>
        <div>
          <h4 class="text-lg font-semibold mb-4">Contact</h4>
          <address class="not-italic text-blue-200 space-y-2">
            <p>123 Accessibility Lane</p>
            <p>Chennai, Tamil Nadu 600001</p>
            <p>Email: <a href="mailto:info@accessiblechennai.in" class="hover:text-white focusable transition-all duration-300" onpointerenter="announceToUser('Email info')">info@accessiblechennai.in</a></p>
            <p>Phone: <a href="tel:+914412345678" class="hover:text-white focusable transition-all duration-300" onpointerenter="announceToUser('Phone number')">+91 44 1234 5678</a></p>
          </address>
        </div>
      </div>
      <div class="border-t border-white/20 mt-8 pt-8 flex flex-col md:flex-row justify-between items-center">
        <p class="text-blue-200 mb-4 md:mb-0">
          &copy; 2025 Accessible Chennai. All rights reserved.
        </p>
        <div class="flex space-x-4">
          <a href="#" class="text-blue-200 hover:text-white focusable transition-all duration-300" onpointerenter="announceToUser('Accessibility Statement')">Accessibility Statement</a>
          <a href="#" class="text-blue-200 hover:text-white focusable transition-all duration-300" onpointerenter="announceToUser('Feedback')">Feedback</a>
        </div>
      </div>
    </div>
  </footer>

  <script>
    // Initialize the application
    document.addEventListener('DOMContentLoaded', () => {
      const observerOptions = {
        threshold: 0.1,
        rootMargin: '0px 0px -50px 0px'
      };

      const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            entry.target.classList.add('visible');
          }
        });
      }, observerOptions);

      document.querySelectorAll('.parallax-section').forEach(el => {
        observer.observe(el);
      });

      renderAlerts();
      startRealTimeUpdates();
      updateFilterCounts();
      updateNotificationCount();
    });

    // Alerts Data
    const alertsData = [
      {
        id: 1,
        type: 'metro',
        title: 'Blue Line - Chennai Central',
        location: 'Platform 2',
        message: 'Next metro train has wheelchair access and audio announcements available. Train arriving in 3 minutes.',
        status: 'available',
        time: new Date(Date.now() - 2 * 60 * 1000),
        priority: 'high',
        tags: ['wheelchair', 'audio', 'tactile'],
        countdown: 3,
        category: 'metro wheelchair audio'
      },
      {
        id: 2,
        type: 'bus',
        title: 'MTC Route 21G',
        location: 'T. Nagar Bus Stand',
        message: 'Low-floor accessible bus arriving in 4 minutes with kneeling feature and priority seating.',
        status: 'available',
        time: new Date(Date.now() - 3 * 60 * 1000),
        priority: 'high',
        tags: ['wheelchair', 'low-floor', 'kneeling'],
        countdown: 4,
        category: 'bus wheelchair'
      },
      {
        id: 3,
        type: 'metro',
        title: 'Green Line Service Update',
        location: 'Guindy to Airport',
        message: 'All stations now equipped with tactile path markers and braille signage for enhanced navigation.',
        status: 'info',
        time: new Date(Date.now() - 15 * 60 * 1000),
        priority: 'medium',
        tags: ['tactile', 'visual', 'braille'],
        category: 'metro tactile visual'
      },
      {
        id: 4,
        type: 'bus',
        title: 'MTC Route 29C - Service Delay',
        location: 'Vadapalani - KK Nagar',
        message: 'Service delayed by 15 minutes due to heavy traffic. Alternative accessible routes available via Route 47A.',
        status: 'delayed',
        time: new Date(Date.now() - 5 * 60 * 1000),
        priority: 'high',
        tags: ['delay', 'wheelchair', 'alternative'],
        category: 'bus delay wheelchair'
      },
      {
        id: 5,
        type: 'station',
        title: 'Chennai Central Railway Station',
        location: 'Platform 7',
        message: 'New accessible restroom facility opened with adult changing table and emergency assistance button.',
        status: 'info',
        time: new Date(Date.now() - 25 * 60 * 1000),
        priority: 'medium',
        tags: ['restroom', 'wheelchair', 'changing-table'],
        category: 'station wheelchair'
      },
      {
        id: 6,
        type: 'metro',
        title: 'Airport Metro - Technical Issue',
        location: 'Meenambakkam Station',
        message: 'Elevator temporarily out of service. Station staff available for assistance. Alternative lift access via Platform B.',
        status: 'unavailable',
        time: new Date(Date.now() - 10 * 60 * 1000),
        priority: 'high',
        tags: ['elevator', 'assistance', 'wheelchair'],
        category: 'metro wheelchair emergency'
      },
      {
        id: 7,
        type: 'bus',
        title: 'MTC Route 54C - New Fleet',
        location: 'Thiruvanmiyur to OMR',
        message: 'New fleet of electric buses with enhanced accessibility features now operational. Features include USB charging and wider aisles.',
        status: 'available',
        time: new Date(Date.now() - 30 * 60 * 1000),
        priority: 'medium',
        tags: ['electric', 'wheelchair', 'audio', 'visual'],
        category: 'bus wheelchair audio visual'
      },
      {
        id: 8,
        type: 'metro',
        title: 'Red Line - Voice System Upgrade',
        location: 'All Stations',
        message: 'Voice announcement system upgraded with multilingual support (Tamil, English, Hindi) and improved clarity.',
        status: 'info',
        time: new Date(Date.now() - 45 * 60 * 1000),
        priority: 'medium',
        tags: ['audio', 'multilingual', 'announcement'],
        category: 'metro audio'
      }
    ];

    const refreshBtn = document.getElementById('refreshBtn');
    const lastUpdate = document.getElementById('lastUpdate');
    const alertsContainer = document.getElementById('alertsContainer');
    const noAlertsMessage = document.getElementById('noAlertsMessage');
    const filterBtns = document.querySelectorAll('.filter-tag');
    const showAdvanced = document.getElementById('showAdvanced');
    const advancedFilters = document.getElementById('advancedFilters');
    const sortBy = document.getElementById('sortBy');
    const modal = document.getElementById('modal');
    const modalTitle = document.getElementById('modalTitle');
    const modalContent = document.getElementById('modalContent');
    const closeModal = document.getElementById('closeModal');
    const modalCancel = document.getElementById('modalCancel');
    const modalConfirm = document.getElementById('modalConfirm');
    const notificationContainer = document.getElementById('notificationContainer');
    const notificationBtn = document.getElementById('notificationBtn');
    const notificationCount = document.getElementById('notificationCount');
    const mobileMenuButton = document.getElementById('mobileMenuButton');
    const mobileMenu = document.getElementById('mobileMenu');
    const filterStatus = document.getElementById('filterStatus');

    let activeFilter = 'all';
    let countdownIntervals = [];
    let currentAlerts = [...alertsData];
    let notifications = [
      {
        id: 1,
        title: 'Service Restored',
        message: 'Blue Line elevator at Chennai Central is now operational',
        time: new Date(Date.now() - 2 * 60 * 1000),
        type: 'success'
      },
      {
        id: 2,
        title: 'Route Update',
        message: 'MTC 21G now has enhanced accessibility features',
        time: new Date(Date.now() - 15 * 60 * 1000),
        type: 'info'
      },
      {
        id: 3,
        title: 'New Feature',
        message: 'Voice announcements now available in Tamil',
        time: new Date(Date.now() - 60 * 60 * 1000),
        type: 'info'
      }
    ];

    mobileMenuButton.addEventListener('click', () => {
      mobileMenu.classList.toggle('open');
      mobileMenuButton.innerHTML = mobileMenu.classList.contains('open') ?
        '<i class="fas fa-times text-white"></i>' :
        '<i class="fas fa-bars text-white"></i>';
      mobileMenuButton.setAttribute('aria-expanded', mobileMenu.classList.contains('open'));
      announceToUser(mobileMenu.classList.contains('open') ? 'Menu opened' : 'Menu closed');
    });

    function renderAlerts(filter = 'all', sort = 'time') {
      let filteredAlerts = filter === 'all' ? currentAlerts :
        currentAlerts.filter(alert => {
          if (filter === 'delay') return alert.status === 'delayed';
          return alert.category.includes(filter) || alert.tags.includes(filter);
        });

      filteredAlerts.sort((a, b) => {
        switch(sort) {
          case 'priority':
            const priorityOrder = { high: 3, medium: 2, low: 1 };
            return priorityOrder[b.priority] - priorityOrder[a.priority];
          case 'time':
            return b.time - a.time;
          case 'distance':
            return Math.random() - 0.5;
          case 'relevance':
            return b.priority === 'high' ? 1 : -1;
          default:
            return b.time - a.time;
        }
      });

      alertsContainer.innerHTML = '';
      countdownIntervals.forEach(interval => clearInterval(interval));
      countdownIntervals = [];

      if (filteredAlerts.length === 0) {
        noAlertsMessage.classList.remove('hidden');
        alertsContainer.classList.add('hidden');
        announceToUser('No alerts found matching your criteria.');
        return;
      }

      noAlertsMessage.classList.add('hidden');
      alertsContainer.classList.remove('hidden');

      filteredAlerts.forEach((alert, index) => {
        const alertCard = createAlertCard(alert, index);
        alertsContainer.appendChild(alertCard);
      });

      filteredAlerts.forEach(alert => {
        if (alert.countdown) {
          startCountdown(alert.id, alert.countdown);
        }
      });

      setTimeout(() => {
        document.querySelectorAll('.alert-card').forEach(card => {
          card.classList.add('visible');
        });
      }, 100);
    }

    function createAlertCard(alert, index) {
      const card = document.createElement('div');
      card.className = 'alert-card glass-strong p-6 rounded-3xl flex flex-col';
      card.style.animationDelay = `${index * 0.1}s`;
      card.setAttribute('role', 'article');
      card.setAttribute('aria-label', `Alert: ${alert.title} at ${alert.location}`);
      card.setAttribute('tabindex', '0');

      const statusColors = {
        available: 'text-green-400 border-green-400',
        delayed: 'text-amber-400 border-amber-400',
        unavailable: 'text-red-400 border-red-400',
        info: 'text-blue-400 border-blue-400'
      };

      const statusBgColors = {
        available: 'bg-green-400',
        delayed: 'bg-amber-400',
        unavailable: 'bg-red-400',
        info: 'bg-blue-400'
      };

      const typeIcons = {
        metro: 'fas fa-subway',
        bus: 'fas fa-bus',
        station: 'fas fa-map-marker-alt'
      };

      const typeColors = {
        metro: 'from-blue-400 to-cyan-400',
        bus: 'from-green-400 to-emerald-400',
        station: 'from-purple-400 to-pink-400'
      };

      card.innerHTML = `
        <div class="flex items-start justify-between mb-4">
          <div class="flex items-center space-x-3 flex-1">
            <div class="w-10 h-10 bg-gradient-to-r ${typeColors[alert.type]} rounded-xl flex items-center justify-center">
              <i class="${typeIcons[alert.type]} text-white text-lg" aria-hidden="true"></i>
            </div>
            <div class="flex-1 min-w-0">
              <h3 class="text-lg font-bold text-white">${alert.title}</h3>
              <p class="text-blue-200 text-sm flex items-center">
                <i class="fas fa-map-marker-alt text-xs mr-1" aria-hidden="true"></i>
                <span>${alert.location}</span>
              </p>
            </div>
          </div>
          <div class="flex items-center space-x-2 flex-shrink-0">
            <div class="status-indicator ${statusBgColors[alert.status]} status-${alert.status}" aria-label="Status: ${alert.status}"></div>
            <span class="text-sm font-medium ${statusColors[alert.status]} capitalize">${alert.status}</span>
          </div>
        </div>

        <p class="text-blue-200 mb-3 leading-relaxed flex-grow">${alert.message}</p>

        ${alert.countdown ? `
          <div class="countdown-container flex items-center space-x-3">
            <div class="relative w-12 h-12 flex-shrink-0">
              <svg class="progress-ring w-12 h-12" viewBox="0 0 80 80" aria-hidden="true">
                <circle cx="40" cy="40" r="36" stroke="rgba(19, 96, 135, 0.2)" stroke-width="8" fill="none"/>
                <circle id="countdown-${alert.id}" cx="40" cy="40" r="36" stroke="#136087" stroke-width="8" fill="none" class="progress-ring-circle"/>
              </svg>
              <div class="absolute inset-0 flex items-center justify-center">
                <span id="time-${alert.id}" class="text-lg font-bold text-blue-400 countdown" aria-label="Arriving in ${alert.countdown} minutes">${alert.countdown}</span>
              </div>
            </div>
            <div class="countdown-text">
              <p class="text-blue-400 font-medium text-sm">Arriving in</p>
              <p class="text-blue-200 text-xs">minutes</p>
            </div>
          </div>
        ` : ''}

        <div class="flex flex-wrap gap-2 mt-3" role="list" aria-label="Alert features">
          ${alert.tags.map(tag => `
            <span class="glass px-2 py-1 rounded-full text-xs font-medium text-blue-400 border border-blue-400/30" role="listitem">
              ${getTagIcon(tag)} ${tag}
            </span>
          `).join('')}
        </div>

        <div class="flex items-center justify-between pt-3 border-t border-white/20 mt-3">
          <div class="flex items-center space-x-4 flex-1 min-w-0">
            <p class="text-blue-200 text-xs flex items-center space-x-1">
              <i class="far fa-clock" aria-hidden="true"></i>
              <span>${getTimeAgo(alert.time)}</span>
            </p>
            <span class="px-2 py-1 rounded-full text-xs font-medium ${getPriorityColor(alert.priority)}">${alert.priority.toUpperCase()}</span>
          </div>
        </div>
      `;

      return card;
    }

    function getTagIcon(tag) {
      const icons = {
        'wheelchair': '‚ôø',
        'audio': 'üîä',
        'visual': 'üëÅÔ∏è',
        'tactile': '‚úã',
        'low-floor': 'üìê',
        'kneeling': 'üîΩ',
        'elevator': 'üõó',
        'delay': '‚è∞',
        'braille': '‚†É',
        'electric': '‚ö°',
        'multilingual': 'üåê',
        'restroom': 'üöª',
        'assistance': 'ü§ù',
        'alternative': 'üîÑ',
        'changing-table': 'üë∂',
        'announcement': 'üì¢'
      };
      return icons[tag] || 'üè∑Ô∏è';
    }

    function getTimeAgo(time) {
      const now = new Date();
      const diff = Math.floor((now - time) / 1000 / 60);
      if (diff < 1) return 'Just now';
      if (diff < 60) return `${diff}m ago`;
      return `${Math.floor(diff / 60)}h ago`;
    }

    function getPriorityColor(priority) {
      const colors = {
        high: 'bg-red-500/20 text-red-400 border border-red-400/30',
        medium: 'bg-amber-500/20 text-amber-400 border border-amber-400/30',
        low: 'bg-gray-500/20 text-blue-200 border border-blue-200/30'
      };
      return colors[priority];
    }

    function startCountdown(alertId, initialTime) {
      let timeLeft = initialTime * 60;
      const timeElement = document.getElementById(`time-${alertId}`);
      const circleElement = document.getElementById(`countdown-${alertId}`);
      if (!timeElement || !circleElement) return;
      const totalTime = initialTime * 60;
      const interval = setInterval(() => {
        timeLeft--;
        const minutes = Math.floor(timeLeft / 60);
        const seconds = timeLeft % 60;
        if (minutes > 0) {
          timeElement.textContent = minutes;
          timeElement.setAttribute('aria-label', `Arriving in ${minutes} minutes`);
        } else {
          timeElement.textContent = seconds < 10 ? `0${seconds}` : seconds;
          timeElement.setAttribute('aria-label', `Arriving in ${seconds} seconds`);
        }
        const progress = (totalTime - timeLeft) / totalTime;
        const offset = 251.2 * progress;
        circleElement.style.strokeDashoffset = offset;
        if (timeLeft <= 30) {
          circleElement.style.stroke = '#ef4444';
          timeElement.style.color = '#ef4444';
        } else if (timeLeft <= 60) {
          circleElement.style.stroke = '#f59e0b';
          timeElement.style.color = '#f59e0b';
        }
        if (timeLeft <= 0) {
          clearInterval(interval);
          timeElement.parentElement.innerHTML = '<i class="fas fa-check text-green-400 text-2xl" aria-label="Vehicle has arrived"></i>';
          const alertTitle = currentAlerts.find(a => a.id === alertId)?.title || 'Transportation';
          showNotification('Arrival Alert', `${alertTitle} has arrived!`, 'success');
          announceToUser(`${alertTitle} has arrived at the station.`);
        }
      }, 1000);
      countdownIntervals.push(interval);
    }

    function updateFilterUI(filterType) {
      filterBtns.forEach(b => {
        const isActive = b.dataset.filter === filterType;
        b.classList.toggle('active', isActive);
        b.classList.toggle('border-blue-400', isActive);
        b.classList.toggle('text-blue-400', isActive);
        b.classList.toggle('border-gray-600', !isActive);
        b.classList.toggle('text-blue-200', !isActive);
        const countSpan = b.querySelector('span');
        if (countSpan) {
          countSpan.classList.toggle('bg-blue-400', isActive);
          countSpan.classList.toggle('bg-gray-600', !isActive);
        }
        b.setAttribute('aria-pressed', isActive ? 'true' : 'false');
      });
      filterStatus.textContent = `Filter set to ${filterType === 'all' ? 'All Alerts' : filterType.charAt(0).toUpperCase() + filterType.slice(1)}`;
      announceToUser(`Filtering by ${filterType === 'all' ? 'all alerts' : filterType}`);
    }

    filterBtns.forEach(btn => {
      btn.addEventListener('click', () => {
        activeFilter = btn.dataset.filter;
        updateFilterUI(activeFilter);
        renderAlerts(activeFilter, sortBy.value);
      });
    });

    showAdvanced.addEventListener('click', () => {
      const isHidden = advancedFilters.classList.contains('hidden');
      advancedFilters.classList.toggle('hidden');
      showAdvanced.innerHTML = isHidden ?
        '<i class="fas fa-chevron-up" aria-hidden="true"></i><span>Hide Advanced</span>' :
        '<i class="fas fa-chevron-down" aria-hidden="true"></i><span>Advanced Filters</span>';
      showAdvanced.setAttribute('aria-expanded', isHidden);
      announceToUser(isHidden ? 'Showing advanced filters' : 'Hiding advanced filters');
    });

    sortBy.addEventListener('change', () => {
      renderAlerts(activeFilter, sortBy.value);
      const sortName = sortBy.options[sortBy.selectedIndex].text;
      announceToUser(`Sorting by ${sortName}`);
    });

    refreshBtn.addEventListener('click', () => {
      refreshBtn.classList.add('fa-spin');
      announceToUser('Refreshing transportation data...');
      setTimeout(() => {
        refreshBtn.classList.remove('fa-spin');
        lastUpdate.textContent = new Date().toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'});
        simulateNewData();
        renderAlerts(activeFilter, sortBy.value);
        updateFilterCounts();
        showNotification('Data Refreshed', 'Latest transportation data has been successfully updated.', 'success');
        announceToUser('Data refreshed successfully.');
      }, 1500);
    });

    function simulateNewData() {
      currentAlerts.forEach(alert => {
        if (Math.random() < 0.3) {
          alert.time = new Date(Date.now() - Math.random() * 30 * 60 * 1000);
          if (alert.countdown && Math.random() < 0.5) {
            alert.countdown = Math.floor(Math.random() * 10) + 1;
          }
        }
      });
      if (Math.random() < 0.2) {
        addRandomAlert();
      }
    }

    function updateFilterCounts() {
      const counts = {
        all: currentAlerts.length,
        metro: currentAlerts.filter(a => a.type === 'metro').length,
        bus: currentAlerts.filter(a => a.type === 'bus').length,
        wheelchair: currentAlerts.filter(a => a.category.includes('wheelchair') || a.tags.includes('wheelchair')).length,
        delay: currentAlerts.filter(a => a.status === 'delayed').length,
        audio: currentAlerts.filter(a => a.category.includes('audio') || a.tags.includes('audio')).length,
        visual: currentAlerts.filter(a => a.category.includes('visual') || a.tags.includes('visual')).length,
        tactile: currentAlerts.filter(a => a.category.includes('tactile') || a.tags.includes('tactile')).length,
        emergency: currentAlerts.filter(a => a.category.includes('emergency') || a.tags.includes('emergency')).length
      };
      Object.keys(counts).forEach(filter => {
        const countElement = document.getElementById(`count-${filter}`);
        if (countElement) {
          countElement.textContent = counts[filter];
        }
      });
    }

    function addRandomAlert() {
      const alertTypes = ['metro', 'bus', 'station'];
      const statuses = ['available', 'delayed', 'unavailable', 'info'];
      const priorities = ['high', 'medium', 'low'];
      const newAlert = {
        id: currentAlerts.length + 1,
        type: alertTypes[Math.floor(Math.random() * alertTypes.length)],
        title: getRandomTitle(),
        location: getRandomLocation(),
        message: getRandomMessage(),
        status: statuses[Math.floor(Math.random() * statuses.length)],
        time: new Date(),
        priority: priorities[Math.floor(Math.random() * priorities.length)],
        tags: getRandomTags(),
        category: getRandomCategory()
      };
      if (Math.random() < 0.4) {
        newAlert.countdown = Math.floor(Math.random() * 10) + 1;
      }
      currentAlerts.unshift(newAlert);
      showNotification('New Alert', `${newAlert.title} at ${newAlert.location}`, 'info');
    }

    function getRandomTitle() {
      const prefixes = ['Service Update', 'Alert', 'Notice', 'Announcement'];
      const suffixes = ['Metro Line', 'Bus Route', 'Station', 'Accessibility'];
      return `${prefixes[Math.floor(Math.random() * prefixes.length)]} - ${suffixes[Math.floor(Math.random() * suffixes.length)]}`;
    }

    function getRandomLocation() {
      const locations = [
        'Chennai Central', 'T. Nagar', 'Vadapalani',
        'Guindy', 'KK Nagar', 'Thiruvanmiyur',
        'OMR', 'Meenambakkam', 'Airport Station'
      ];
      return locations[Math.floor(Math.random() * locations.length)];
    }

    function getRandomMessage() {
      const messages = [
        'Wheelchair accessible vehicle arriving next.',
        'Service delayed due to technical issues.',
        'New accessibility features now available.',
        'Elevator temporarily out of service.',
        'Audio announcements now in multiple languages.',
        'Tactile path markers recently installed.',
        'Low-floor bus service available on this route.',
        'Emergency assistance button now operational.'
      ];
      return messages[Math.floor(Math.random() * messages.length)];
    }

    function getRandomTags() {
      const allTags = [
        'wheelchair', 'audio', 'visual', 'tactile',
        'low-floor', 'kneeling', 'elevator', 'delay',
        'braille', 'electric', 'multilingual', 'restroom',
        'assistance', 'alternative', 'changing-table', 'announcement'
      ];
      const numTags = Math.floor(Math.random() * 3) + 1;
      const shuffled = allTags.sort(() => 0.5 - Math.random());
      return shuffled.slice(0, numTags);
    }

    function getRandomCategory() {
      const categories = [
        'metro wheelchair', 'bus wheelchair', 'station wheelchair',
        'metro audio', 'bus delay', 'metro tactile',
        'bus visual', 'metro emergency'
      ];
      return categories[Math.floor(Math.random() * categories.length)];
    }

    function startRealTimeUpdates() {
      setInterval(() => {
        simulateNewData();
        renderAlerts(activeFilter, sortBy.value);
        updateFilterCounts();
      }, 30000);
    }

    function showNotification(title, message, type = 'info') {
      const notification = document.createElement('div');
      notification.className = `notification glass-strong p-4 rounded-3xl flex items-start space-x-3 ${type === 'error' ? 'border-l-4 border-red-400' :
        type === 'success' ? 'border-l-4 border-green-400' : 'border-l-4 border-blue-400'}`;
      notification.setAttribute('role', 'alert');

      const icon = type === 'error' ? 'exclamation-circle' :
        type === 'success' ? 'check-circle' : 'info-circle';

      notification.innerHTML = `
        <i class="fas fa-${icon} ${type === 'error' ? 'text-red-400' :
          type === 'success' ? 'text-green-400' : 'text-blue-400'} mt-1"></i>
        <div class="flex-1 min-w-0">
          <h4 class="font-bold text-white">${title}</h4>
          <p class="text-blue-200 text-sm">${message}</p>
        </div>
        <button class="text-blue-200 hover:text-white focusable hover-light glow-primary" aria-label="Dismiss notification" onpointerenter="announceToUser('Dismiss notification')">
          <i class="fas fa-times"></i>
        </button>
      `;

      notificationContainer.appendChild(notification);

      setTimeout(() => {
        notification.remove();
      }, 5000);

      notification.querySelector('button').addEventListener('click', () => {
        notification.remove();
        announceToUser('Notification dismissed');
      });

      updateNotificationCount();
      announceToUser(`${title}: ${message}`);
    }

    function updateNotificationCount() {
      const count = notifications.length;
      notificationCount.textContent = count;
      notificationCount.style.display = count > 0 ? 'flex' : 'none';
    }

    function showModal(title, content, confirmText = 'Confirm', confirmCallback = null) {
      modalTitle.textContent = title;
      modalContent.textContent = content;
      modalConfirm.textContent = confirmText;
      modal.classList.remove('hidden');
      document.body.style.overflow = 'hidden';

      const close = () => {
        modal.classList.add('hidden');
        document.body.style.overflow = '';
        announceToUser('Modal closed');
      };

      closeModal.onclick = close;
      modalCancel.onclick = close;

      modalConfirm.onclick = () => {
        if (confirmCallback) confirmCallback();
        close();
      };
    }

    function aiAction(action) {
      switch(action) {
        case 'emergency':
          showModal(
            'Emergency Assistance',
            'Contact transportation assistance:\n\n1. Metro Helpline: 044-23456789\n2. MTC Control Room: 044-23456780\n3. Police: 100\n\nDo you need help calling?',
            'Call Help',
            () => {
              showNotification('Emergency', 'Connecting to transportation helpline...', 'error');
              announceToUser('Connecting you to transportation emergency services. Please wait.');
            }
          );
          break;
        default:
          showNotification('AI Action', 'Assistant feature coming soon!', 'info');
      }
    }

    notificationBtn.addEventListener('click', () => {
      notifications.forEach(notif => {
        showNotification(notif.title, notif.message, notif.type);
      });
      notifications = [];
      updateNotificationCount();
      announceToUser('Showing recent notifications');
    });

    document.addEventListener('keydown', (e) => {
      if (e.key === 'F5') {
        e.preventDefault();
        refreshBtn.click();
      }
      if (e.key === 'Escape' && !modal.classList.contains('hidden')) {
        modal.classList.add('hidden');
        document.body.style.overflow = '';
        announceToUser('Modal closed');
      }
    });

    setTimeout(() => {
      showNotification('Welcome', 'Accessible Chennai alerts dashboard is ready with live updates!', 'info');
    }, 1000);

    function announceToUser(message) {
      const announcement = document.createElement('div');
      announcement.setAttribute('aria-live', 'polite');
      announcement.setAttribute('aria-atomic', 'true');
      announcement.className = 'sr-only';
      announcement.textContent = message;
      document.body.appendChild(announcement);
      setTimeout(() => {
        document.body.removeChild(announcement);
      }, 1000);
    }

    window.addEventListener('focus', (event) => {
      if (event.target.matches('button, input, select, textarea, a, .alert-card')) {
        event.target.scrollIntoView({ behavior: 'smooth', block: 'center' });
        announceToUser(`Focused: ${event.target.getAttribute('aria-label') || event.target.textContent.trim() || 'Element'}`);
      }
    }, true);
  </script>
</body>
</html>