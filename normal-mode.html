<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Accessible Chennai - Inclusive Public Transport Navigation</title>
    <meta name="description" content="Helping people with disabilities navigate Chennai's public transport system with voice guidance, screen reader support, and wheelchair accessible routes.">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap');

        :root {
            --primary: #136087;
            --secondary: #0876ae;
            --accent: #f59e0b;
            --dark: #0f172a;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background-color: #0a415d;
            color: #f8fafc;
        }

        /* Splash Screen Animations */
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        @keyframes slideUp {
            from { transform: translateY(20px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        .animate-fade-in {
            animation: fadeIn 0.8s ease-out forwards;
        }
        .animate-slide-up {
            animation: slideUp 0.8s ease-out 0.3s forwards;
        }
        .animate-pulse {
            animation: pulse 2s infinite;
        }

        /* Reduced motion settings */
        @media (prefers-reduced-motion: reduce) {
            * {
                animation: none !important;
                transition: none !important;
                scroll-behavior: auto !important;
            }
        }

        /* Accessibility focus styles */
        .focusable:focus {
            outline: 3px solid rgba(255, 255, 255, 0.8);
            outline-offset: 2px;
        }

        /* Text gradient */
        .text-gradient {
            background: linear-gradient(90deg, #ffffff 0%, #e0f2fe 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        /* Floating animation */
        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-15px); }
        }

        .floating {
            animation: float 6s ease-in-out infinite;
        }

        /* Pulse animation */
        .pulse {
            animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }

        /* 360 Degree Rotation */
        @keyframes rotate360 {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        .rotate-360 {
            animation: rotate360 20s linear infinite;
        }

        /* Pop-up animation */
        @keyframes pop-up {
            0% { transform: scale(0); opacity: 0; }
            80% { transform: scale(1.1); }
            100% { transform: scale(1); opacity: 1; }
        }

        .pop-up {
            animation: pop-up 0.8s cubic-bezier(0.68, -0.55, 0.265, 1.55) forwards;
        }

        /* Vehicle orbit animation */
        @keyframes orbit {
            from { transform: rotate(0deg) translateX(150px) rotate(0deg); }
            to { transform: rotate(360deg) translateX(150px) rotate(-360deg); }
        }

        @media (max-width: 768px) {
            @keyframes orbit {
                from { transform: rotate(0deg) translateX(100px) rotate(0deg); }
                to { transform: rotate(360deg) translateX(100px) rotate(-360deg); }
            }
        }

        .orbit {
            animation: orbit 12s linear infinite;
        }

        /* Glow effect */
        .glow {
            filter: drop-shadow(0 0 8px rgba(255, 255, 255, 0.7));
        }

        /* Card hover effects */
        .feature-card {
            transition: all 0.3s ease;
            transform-style: preserve-3d;
        }

        .feature-card:hover {
            transform: scale(1.05) translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
        }

        .feature-card:active {
            transform: scale(0.98);
        }

        /* Modal transition */
        .modal-enter {
            opacity: 0;
            transform: scale(0.9);
        }

        .modal-enter-active {
            opacity: 1;
            transform: translateX(0);
            transition: opacity 300ms, transform 300ms;
        }

        .modal-exit {
            opacity: 1;
        }

        .modal-exit-active {
            opacity: 0;
            transform: scale(0.9);
            transition: opacity 300ms, transform 300ms;
        }

        /* Light pulse effect */
        @keyframes light-pulse {
            0% { box-shadow: 0 0 0 0 rgba(255, 255, 255, 0.7); }
            70% { box-shadow: 0 0 0 15px rgba(255, 255, 255, 0); }
            100% { box-shadow: 0 0 0 0 rgba(255, 255, 255, 0); }
        }

        .light-pulse {
            animation: light-pulse 1s cubic-bezier(0.4, 0, 0.6, 1);
        }

        /* 3D rotation effect */
        @keyframes rotate-y {
            0% { transform: rotateY(0deg); }
            100% { transform: rotateY(360deg); }
        }

        .rotate-y {
            animation: rotate-y 0.8s cubic-bezier(0.4, 0, 0.2, 1) forwards;
        }
    </style>
</head>
<body class="min-h-screen flex flex-col">
    <!-- Splash Screen -->
    <div id="splash" class="fixed inset-0 z-50 flex items-center justify-center" style="background-color: #0d3a58;">
        <div class="text-center">
            <div class="mb-10 animate-fade-in">
                <div class="flex items-center justify-center">
                    <img src="ACCESSIBLECHENNAII.png" alt="Accessible Chennai Logo" class="h-96 w-96 object-cover rounded-full animate-pulse shadow-2xl">
                </div>
            </div>
            <h1 class="text-6xl font-extrabold text-white mb-4 animate-slide-up tracking-wide">Accessible Chennai</h1>
            <p class="text-white text-2xl opacity-0 animate-slide-up font-light">Loading...</p>
        </div>
    </div>

    <!-- Skip to content link for screen readers -->
    <a href="#main-content" class="sr-only focus:not-sr-only focus:absolute focus:top-4 focus:left-4 focus:px-4 focus:py-2 focus:bg-white focus:text-blue-600 focus:rounded-md focus:z-50">
        Skip to main content
    </a>

    <!-- Header with navigation -->
    <header class="bg-blue-600/20 backdrop-blur-md sticky top-0 z-40 shadow-lg hidden" id="header">
        <div class="container mx-auto px-4 py-3 flex items-center justify-between">
            <div class="flex items-center space-x-1">
                <a href="#" class="flex items-center space-x-1 focusable rounded-md" data-aos="fade-right">
                    <div class="w-20 h-20 rounded-full flex items-center justify-center">
                        <img src="ACCESSIBLECHENNAII.png" alt="Accessible Chennai Logo" class="w-16 h-16 object-cover rounded-full">
                    </div>
                    <h1 class="text-2xl font-bold">Accessible<span class="bg-gradient-to-r from-blue-300 to-cyan-300 bg-clip-text text-transparent"> Chennai</span></h1>
                </a>
            </div>
            
            <nav aria-label="Main navigation" data-aos="fade-left">
                <ul class="flex space-x-1">
                    <li>
                        <a href="Home.html" class="px-3 py-2 rounded-md text-sm font-medium text-white/80 hover:text-white hover:bg-white/10 focusable transition-all duration-300">Home</a>
                    </li>
                    <li>
                        <a href="navigate.html" class="px-3 py-2 rounded-md text-sm font-medium text-white/80 hover:text-white hover:bg-white/10 focusable transition-all duration-300">Navigate</a>
                    </li>
                    <li>
                        <a href="community.html" class="px-3 py-2 rounded-md text-sm font-medium text-white/80 hover:text-white hover:bg-white/10 focusable transition-all duration-300">Community</a>
                    </li>
                    <li>
                        <a href="alerts.html" class="px-3 py-2 rounded-md text-sm font-medium text-white/80 hover:text-white hover:bg-white/10 focusable transition-all duration-300">Alerts</a>
                    </li>
                    <li>
                        <a href="settings.html" class="px-3 py-2 rounded-md text-sm font-medium text-white/80 hover:text-white hover:bg-white/10 focusable transition-all duration-300">Settings</a>
                    </li>
                </ul>
            </nav>
        </div>
    </header>

    <!-- Main content -->
    <main id="main-content" class="flex-grow hidden">
        <!-- Mode selection section -->
        <section aria-labelledby="mode-selection-heading" class="relative overflow-hidden py-12 md:py-24">
            <!-- Vehicle orbit animation in top right corner -->
            <div class="absolute top-0 right-0 w-full h-full overflow-hidden pointer-events-none">
                <div class="absolute top-0 right-0 w-full h-full">
                    <div class="relative w-full h-full">
                        <div class="orbit absolute top-1/4 -right-1/4 md:top-1/4 md:-right-1/4">
                            <div class="w-12 h-12 rounded-full bg-white/20 backdrop-blur-md flex items-center justify-center text-white text-xl glow">
                                <i class="fas fa-bus"></i>
                            </div>
                        </div>
                        <div class="orbit absolute top-1/4 -right-1/4 md:top-1/4 md:-right-1/4" style="animation-delay: -3s;">
                            <div class="w-12 h-12 rounded-full bg-white/20 backdrop-blur-md flex items-center justify-center text-white text-xl glow">
                                <i class="fas fa-subway"></i>
                            </div>
                        </div>
                        <div class="orbit absolute top-1/4 -right-1/4 md:top-1/4 md:-right-1/4" style="animation-delay: -6s;">
                            <div class="w-12 h-12 rounded-full bg-white/20 backdrop-blur-md flex items-center justify-center text-white text-xl glow">
                                <i class="fas fa-taxi"></i>
                            </div>
                        </div>
                        <div class="orbit absolute top-1/4 -right-1/4 md:top-1/4 md:-right-1/4" style="animation-delay: -9s;">
                            <div class="w-12 h-12 rounded-full bg-white/20 backdrop-blur-md flex items-center justify-center text-white text-xl glow">
                                <i class="fas fa-wheelchair"></i>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="container mx-auto px-4 relative z-10">
                <div class="flex flex-col items-center text-center">
                    <div class="max-w-3xl space-y-8" data-aos="fade-up">
                        <h1 id="mode-selection-heading" class="text-4xl md:text-6xl font-bold leading-tight sr-only">
                            Select Your Mode
                        </h1>
                        <div class="flex flex-col md:flex-row justify-center gap-6 max-w-2xl mx-auto">
                            <button id="normal-mode-btn" class="feature-card bg-white/10 backdrop-blur-md p-12 rounded-xl border border-white/20 hover:border-white/30 focusable transition-all duration-300 text-white text-2xl font-semibold w-full md:w-64 h-64 flex items-center justify-center hover:bg-white/20" aria-label="Select Normal Mode" onclick="selectMode('normal')">
                                Normal Mode
                            </button>
                            <button id="voice-mode-btn" class="feature-card bg-white/10 backdrop-blur-md p-12 rounded-xl border border-white/20 hover:border-white/30 focusable transition-all duration-300 text-white text-2xl font-semibold w-full md:w-64 h-64 flex items-center justify-center hover:bg-white/20" aria-label="Select Voice Mode" onclick="selectMode('voice')">
                                Voice Mode
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="bg-blue-600/20 backdrop-blur-md text-white py-12 hidden" id="footer">
        <div class="container mx-auto px-4">
            <div class="border-t border-white/20 mt-8 pt-8 flex flex-col md:flex-row justify-between items-center">
                <p class="text-white/80 mb-4 md:mb-0">
                    &copy; 2024 Accessible Chennai. All rights reserved.
                </p>
                <div class="flex space-x-4">
                    <a href="#" class="text-white/80 hover:text-white focusable transition-all duration-300">Accessibility Statement</a>
                    <a href="#" class="text-white/80 hover:text-white focusable transition-all duration-300">Feedback</a>
                </div>
            </div>
        </div>
    </footer>

    <!-- AOS Animation Library -->
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Splash screen logic - VISIBLE FOR 2 SECONDS
            setTimeout(() => {
                const splash = document.getElementById('splash');
                splash.classList.add('opacity-0', 'transition-opacity', 'duration-500');
                
                setTimeout(() => {
                    splash.classList.add('hidden');
                    document.getElementById('main-content').classList.remove('hidden');
                    document.getElementById('header').classList.remove('hidden');
                    document.getElementById('footer').classList.remove('hidden');
                    AOS.init({
                        duration: 800,
                        easing: 'ease-in-out',
                        once: true,
                        mirror: false
                    });
                    // Speak initial prompt
                    speak('Please select voice mode or normal mode');
                    initializeVoiceAssistant();
                }, 500);
            }, 2000);

            // Reduced motion preference
            const reduceMotion = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
            if (reduceMotion) {
                document.documentElement.style.scrollBehavior = 'auto';
                document.querySelectorAll('[data-aos]').forEach(el => {
                    el.removeAttribute('data-aos');
                });
                document.querySelectorAll('.orbit').forEach(el => {
                    el.style.animation = 'none';
                });
            }
        });

        // Voice Assistant Implementation
        let recognition;
        let isVoiceMode = false;

        function initializeVoiceAssistant() {
            if ('SpeechRecognition' in window || 'webkitSpeechRecognition' in window) {
                recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
                recognition.continuous = true;
                recognition.interimResults = false;
                recognition.lang = 'en-IN';

                recognition.onresult = function(event) {
                    const transcript = event.results[event.results.length - 1][0].transcript.toLowerCase().trim();
                    handleVoiceCommand(transcript);
                };

                recognition.onerror = function(event) {
                    console.error('Speech recognition error:', event.error);
                    if (event.error === 'no-speech' || event.error === 'audio-capture') {
                        recognition.start(); // Restart recognition on minor errors
                    }
                };

                recognition.onend = function() {
                    if (isVoiceMode) {
                        recognition.start(); // Keep listening in voice mode
                    }
                };

                // Request microphone permission
                try {
                    recognition.start();
                    setTimeout(() => recognition.stop(), 100); // Brief start to trigger permission prompt
                    setTimeout(() => recognition.start(), 200); // Restart for continuous listening
                } catch (e) {
                    console.error('Error initializing voice assistant:', e);
                    alert('Failed to initialize voice assistant. Please check microphone permissions.');
                }
            } else {
                alert('Sorry, your browser does not support the Web Speech API.');
            }
        }

        function speak(text) {
            const utterance = new SpeechSynthesisUtterance(text);
            utterance.lang = 'en-GB'; // Use Google UK English Female voice
            utterance.volume = 1;
            utterance.rate = 0.9; // Slightly slower for clarity
            utterance.pitch = 1;
            // Attempt to select a high-quality UK English female voice
            const voices = window.speechSynthesis.getVoices();
            const ukFemaleVoice = voices.find(voice => voice.lang === 'en-GB' && voice.name.toLowerCase().includes('female')) || voices.find(voice => voice.lang === 'en-GB');
            if (ukFemaleVoice) {
                utterance.voice = ukFemaleVoice;
            }
            window.speechSynthesis.speak(utterance);
        }

        // Ensure voices are loaded before speaking
        window.speechSynthesis.onvoiceschanged = function() {
            // Re-speak initial prompt with selected voice if needed
        };

        function handleVoiceCommand(command) {
            if (!isVoiceMode) {
                // Initial mode selection commands
                if (command.includes('normal mode')) {
                    speak('Redirecting to Normal Mode');
                    setTimeout(() => {
                        window.location.href = 'home.html';
                    }, 1000);
                } else if (command.includes('voice mode')) {
                    speak('Redirecting to Voice Mode');
                    isVoiceMode = true;
                    recognition.start();
                    setTimeout(() => {
                        window.location.href = 'voicemode.html';
                    }, 1000);
                }
            } else {
                // Voice mode navigation commands
                const commands = [
                    { phrase: 'home', response: 'Navigating to Home', url: 'home.html' },
                    { phrase: 'navigate', response: 'Navigating to Navigation page', url: 'navigate.html' },
                    { phrase: 'plan journey', response: 'Opening journey planner', url: 'navigate.html#planner' },
                    { phrase: 'settings', response: 'Navigating to Settings', url: 'settings.html' },
                    { phrase: 'community', response: 'Navigating to Community page', url: 'community.html' },
                    { phrase: 'alerts', response: 'Navigating to Alerts page', url: 'alerts.html' }
                ];

                const matchedCommand = commands.find(cmd => command.includes(cmd.phrase));
                if (matchedCommand) {
                    speak(matchedCommand.response);
                    setTimeout(() => {
                        window.location.href = matchedCommand.url;
                    }, 1000);
                } else {
                    speak('Command not recognized. Please say Home, Navigate, Plan journey, Settings, Community, or Alerts.');
                }
            }
        }

        function selectMode(mode) {
            if (mode === 'normal') {
                speak('Redirecting to Normal Mode');
                setTimeout(() => {
                    window.location.href = 'home.html';
                }, 1000);
            } else if (mode === 'voice') {
                speak('Redirecting to Voice Mode');
                isVoiceMode = true;
                recognition.start();
                setTimeout(() => {
                    window.location.href = 'voicemode.html';
                }, 1000);
            }
        }
    </script>
</body>
</html>